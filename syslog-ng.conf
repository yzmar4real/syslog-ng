@version: 4.0
@include "scl.conf"

# Sources: Define where logs come from
source s_network {
    udp(ip(0.0.0.0) port(514));  # UDP syslog input
    tcp(ip(0.0.0.0) port(514));  # TCP syslog input
    syslog(ip(0.0.0.0) port(601) transport("tcp"));  # Reliable syslog (optional)
};

# Destination: Where logs are stored
destination d_logs {
    file("/var/log/$HOST/$YEAR-$MONTH-$DAY.log" create_dirs(yes));
};

# Optional: Forward logs to a visualization tool (e.g., Graylog, Loki)
# destination d_vis {
#     syslog("192.168.1.100" port(514) transport("udp"));
# };

# Log path: Connect source to destination
log {
    source(s_network);
    destination(d_logs);
    # destination(d_vis);  # Uncomment if forwarding
};

# Optional: Basic parsing or filtering
# filter f_critical { level(crit..emerg); };
# log { source(s_network); filter(f_critical); destination(d_critical); };
